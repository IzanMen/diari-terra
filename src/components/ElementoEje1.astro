<div id="story-box-1">
    <h2 id="story-title-1">INICI DEL SILURIÀ</h2>
    <p id="story-text-1"></p>
</div>

<script>
    const element_1 = document.querySelector('#story-box-1') as HTMLElement | null;
    const storyText_1 = document.getElementById('story-text-1') as HTMLElement | null;
    const story_1 = "Ja fa uns 96 milions d’anys des de l’inici del Paleozoic, que ràpid passa el temps… sembla que va ser ahir quan van aparèixer els primers invertebrats, pero no, ja fa 97 milions d’anys. Durant aquest temps han succeït moltes coses, tot i que la vida terrestre no s’ha desenvolupat gaire, la vida marina ha patit un gran desenvolupament. Cal dir que no fa gaire hi va haver una extinció massiva d’espècies. Estic en plena glaciació i fa molt de fred, però sembla que la temperatura torna a pujar cap a un clima més càlid.";

    let storyStarted_1 = false;

    function typeWriter_1(text: string, index = 0, onComplete?: () => void) {
        if (index < text.length) {
            if (storyText_1) {
                storyText_1.textContent += text.charAt(index);
            }
            setTimeout(() => typeWriter_1(text, index + 1, onComplete), 50);
        } else if (onComplete) {
            setTimeout(onComplete, 2000);
        }
    }

    function moveContainerRight_1() {
        if (element_1) {
            element_1.style.transition = 'transform .5s ease-in-out';
            element_1.style.transform = 'translateX(100vw)';

            // Esperamos a que termine la transición (0.5s), luego hacemos scroll
            setTimeout(() => {
                window.scrollTo({
                    top: window.scrollY + 1800,
                    behavior: 'smooth'
                });
            }, 500); // Coincide con la duración de la animación del contenedor
        }
    }

    if (element_1) {
        setTimeout(() => {
            element_1.style.filter = 'opacity(1)';
        }, 6500);

        element_1.addEventListener('mouseover', () => {
            element_1.style.position = 'fixed';
            element_1.style.width = '100%';
            element_1.style.height = '100vh';
            element_1.style.borderRadius = '0';
            element_1.style.top = '0';

            const title_1 = element_1.querySelector('#story-title-1') as HTMLElement | null;
            if (title_1) title_1.style.display = 'none';

            if (storyText_1) {
                storyText_1.style.display = 'block';
                if (!storyStarted_1) {
                    storyStarted_1 = true;
                    typeWriter_1(story_1, 0, moveContainerRight_1);
                }
            }
        });
    }
</script>

<style>
    #story-box-1 {
        position: absolute;
        top: 240px;
        width: 500px;
        height: 180px;
        background-color: #fff;
        color: #000;
        left: 0;
        right: 0;
        margin: auto;
        display: flex;
        filter: opacity(0);
        flex-direction: column;
        align-items: center;
        justify-content: center;
        border-radius: 10px;
        transition: all 1s ease-in-out;
    }

    #story-title-1 {
        font-weight: 700;
    }

    #story-text-1 {
        width: 80%;
        font-size: 1.2rem;
        display: none;
        white-space: pre-wrap;
        line-height: 1.5;
        text-align: center;
    }
</style>
